<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction Data</title>

    <!-- Flowbite CSS (Tailwind CSS is automatically included in Flowbite) -->
    <link href="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.css" rel="stylesheet" />

    <!-- Tailwind CSS (optional if you need additional customization) -->
    <!-- <script src="https://cdn.tailwindcss.com"></script> -->

    <!-- jQuery Library -->
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>

    <!-- Simple DataTables CDN -->
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@9.0.3"></script>
</head>

<body class="bg-gray-100">

    <!-- Container for the Table -->
    <div class="container mx-auto p-6">
        <table id="pagination-table" class="table-auto w-full text-sm text-left text-gray-500 border-collapse">
            <thead class="bg-blue-100">
                <tr>
                    <th class="px-6 py-3 font-medium text-gray-900">
                        Nama
                    </th>
                    <th class="px-6 py-3 font-medium text-gray-900">
                        Mantan
                    </th>
                    <th class="px-6 py-3 font-medium text-gray-900">
                        Email
                    </th>
                    <th class="px-6 py-3 font-medium text-gray-900">
                        Phone
                    </th>
                    <th class="px-6 py-3 font-medium text-gray-900">
                        Amount
                    </th>
                    <th class="px-6 py-3 font-medium text-gray-900">
                        Status
                    </th>
                </tr>
            </thead>
            <tbody class="bg-white">
                <!-- Data rows will be inserted here dynamically -->
            </tbody>
        </table>
    </div>

    <!-- Flowbite JS -->
    <script src="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.js"></script>

    <script>
        // Fetch data from your server-side API or database
        async function fetchData() {
            try {
                const response = await fetch('get_transactions.php'); // Replace with your actual API endpoint
                const data = await response.json(); // Assuming the response is in JSON format

                const tableBody = document.querySelector("#pagination-table tbody");

                // Clear any existing rows in the table body
                tableBody.innerHTML = '';

                // Loop through the data and create table rows dynamically
                data.forEach(item => {
                    
                    const row = document.createElement("tr");
                    row.classList.add('border-b'); // Adding a bottom border for each row

                    let badge_class = row.badge_class;

                    row.innerHTML = `
                        <td class="px-6 py-4">${row.name_1} ${row.name_2 ? ' / ' + row.name_2 : ''}</td>
                        <td class="px-6 py-4">${item.mantan_1} ${row.mantan_2 ? ' / ' + row.mantan_2 : ''}</td>
                        <td class="px-6 py-4">${row.email_1} ${row.email_2 ? ' / ' + row.email_2 : ''}</td>
                        <td class="px-6 py-4">${row.phone_1} ${row.phone_2 ? ' / ' + row.phone_2 : ''}</td>
                        <td class="px-6 py-4">${row.total_amount}</td>
                        <td class="px-6 py-4">${row.transaction_date}</td>
                        <td>
                            <span class="badge badge-dot mr-4">
                            <i class="${badge_class}"></i>${row.status}
                        </td>
                    `;
                    tableBody.appendChild(row);
                });

                // Initialize the DataTable after the data is populated
                if (document.getElementById("pagination-table") && typeof simpleDatatables.DataTable !== 'undefined') {
                    new simpleDatatables.DataTable("#pagination-table", {
                        searchable: true,
                        paging: true,
                        perPage: 5,
                        perPageSelect: [5, 10, 15, 20, 25],
                        sortable: false
                    });
                }
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }

        // Call fetchData to populate the table
        fetchData();
    </script>

</body>

</html>
