<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction Data</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

<div class="container mx-auto my-5 p-4">
    <h2 class="text-3xl font-semibold mb-6">Transaction Details</h2>
    
    <div class="overflow-x-auto bg-white shadow-lg rounded-lg">
        <table class="min-w-full table-auto border-collapse" id="transactionTable">
            <thead class="bg-blue-600 text-white">
                <tr>
                    <th class="px-6 py-3 text-left">Transaction ID</th>
                    <th class="px-6 py-3 text-left">Amount</th>
                    <th class="px-6 py-3 text-left">Payment Proof</th>
                    <th class="px-6 py-3 text-left">Transaction Date</th>
                    <th class="px-6 py-3 text-left">Status</th>
                    <th class="px-6 py-3 text-left">Name</th>
                    <th class="px-6 py-3 text-left">Email</th>
                    <th class="px-6 py-3 text-left">Phone</th>
                </tr>
            </thead>
            <tbody>
                <!-- Data will be populated here via JavaScript -->
            </tbody>
        </table>
    </div>
</div>

<!-- Tailwind JS (For potential interactivity in the future) -->
<script src="https://cdn.tailwindcss.com"></script>
<!-- jQuery CDN -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
$(document).ready(function() {
    // Fetch data from the API endpoint
    $.ajax({
        url: 'get_transactions.php', // Update this URL if needed
        method: 'GET',
        success: function(data) {
            if (data.length > 0) {
                // Populate the table with data
                let tableRows = '';
                data.forEach(function(row) {
                    let statusClass = row.badge_class;
                    tableRows += `
                        <tr class="border-b hover:bg-gray-100">
                            <td class="px-6 py-3">${row.transaction_id}</td>
                            <td class="px-6 py-3">${row.total_amount}</td>
                            <td class="px-6 py-3">
                                <a href="users/paymentprooft/${row.payment_prooft}" target="_blank" class="text-blue-500 hover:underline">View Proof</a>
                            </td>
                            <td class="px-6 py-3">${row.transaction_date}</td>
                            <td class="px-6 py-3"><span class="badge ${statusClass}">${row.status}</span></td>
                            <td class="px-6 py-3">${row.name_1} ${row.name_2 ? ' / ' + row.name_2 : ''}</td>
                            <td class="px-6 py-3">${row.email_1} ${row.email_2 ? ' / ' + row.email_2 : ''}</td>
                            <td class="px-6 py-3">${row.phone_1} ${row.phone_2 ? ' / ' + row.phone_2 : ''}</td>
                        </tr>
                    `;
                });
                $('#transactionTable tbody').html(tableRows); // Add the rows to the table body
            }
        },
        error: function() {
            alert('Error fetching data');
        }
    });
});
</script>

</body>
</html>
